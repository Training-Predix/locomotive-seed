"use strict";!function(){function a(a){if(a&&a.length>=2)return{x:a[0],y:a[1]};throw new Error("Invalid time series point format")}function b(b){if(b.name&&b.values&&b.values.constructor===Array){var c=b.values,d=c.map(a);return{name:b.name,data:d}}throw new Error("Invalid time series data format")}function c(a){if(a&&a.constructor===Array){var c=[];return a.forEach(function(a){if(!a.results||a.results.constructor!==Array)throw new Error("Invalid time series data format");c=c.concat(a.results.map(b))}),c}throw new Error("Invalid time series data format")}window.px=window.px||{},window.px.timeseries=window.px.timeseries||{},window.px.timeseries.adapter=window.px.timeseries.adapter||{},window.px.timeseries.adapter.kairosdb=window.px.timeseries.adapter.kairosdb||{},window.px.timeseries.adapter.kairosdb={transform:c},window.px.timeseries.dataTransformer=function(a){this.option={getSeriesName:function(a,b){var c="";return b&&b.constructor===Array&&b.forEach(function(a){c=c+"_"+a.name,a.values&&a.values.constructor===Array&&a.values.forEach(function(a){c=c+"_"+a})}),a+c}},a&&a.getSeriesName&&"function"==typeof a.getSeriesName&&(this.option.getSeriesName=a.getSeriesName)},window.px.timeseries.dataTransformer.prototype.transform=function(a){if(a&&a.constructor===Array){var b=[],c=this;return a.forEach(function(a){if(!a.name||!a.results||a.results.constructor!==Array)throw new Error("Invalid time series data format");a.results.map(c.makeSeries).forEach(function(d){d.name=c.option.getSeriesName(a.name,d._groups),delete d._groups,b=b.concat(d)})}),b}throw new Error("Invalid time series data format")},window.px.timeseries.dataTransformer.prototype.makeSeries=function(b){if(b.datapoints&&b.datapoints.constructor===Array){var c=b.datapoints.map(a);return{_groups:b.groups,data:c}}throw new Error("Invalid time series data format")},window.addEventListener("px-deck-ready",function(a){a.target.init()}),window.px.dealer={setHttpProvider:function(a){this.httpProvider=a},getHttpProvider:function(){var a=null;return this.httpProvider?this.httpProvider:(window.angular&&(a=angular.element("body").injector().get("$http")),a)},getData:function(a,b){return(null===b||"object"!=typeof b)&&(b={}),/callback=/.test(a)?b.method="JSONP":b.method="GET",b.url=a,this.httpRequest(b)},httpRequest:function(a){var b=this.getHttpProvider();return b?new Promise(function(c,d){var e=function(a){c(a)},f=function(a){d(a)};b(a).success(e).error(f)}):void 0},init:function(a,b){this.deckDefinitions=a,this.decksByClassification=b},getDecksByClassification:function(a,b){var c=[],d=this;if(a&&this.decksByClassification&&a in this.decksByClassification){var e=this.decksByClassification[a];b in e&&e[b].forEach(function(a){d.deckDefinitions[a]&&c.push(d.deckDefinitions[a])})}return new Promise(function(a,b){a(c)})},getDeck:function(a){return this.getData(a)}},window.px.isInt=function(a){return Number(a)===a&&a%1===0},window.px.isFloat=function(a){return a===Number(a)&&a%1!==0},window.px.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},window.px.slugify=function(a){var b=a.replace(/([a-z])([A-Z])/g,"$1 $2"),c=b.toLowerCase(),d=c.replace(/\s/g,"-");return d}}();